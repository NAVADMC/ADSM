{% extends 'Results/navigationPane.html' %}
{% load floppyforms %}
{% load crispy_forms_tags %}

{% block content %}
    {% if is_simulation_stopped %}
        <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/mapbox.css" />
        <script type="text/javascript" src="{{ STATIC_URL }}js/mousewheel.js"></script> 
        <script type="text/javascript" src="{{ STATIC_URL }}js/mapbox.js"></script> 
        <div class="mapwrapper">
            <div id="viewport" style="background: url({{ STATIC_URL }}working.gif) no-repeat center;height: 800px; width: 923px;">
                <div style="background: url(/results/population_thumbnail.png) no-repeat center;height: 800px; width: 923px;">
                    <!--top level map content goes here-->
                </div>
                <div style="height: 2080px; width: 2400px;">
                    <img src="/results/population_zoom.png" alt="" />
                    <div class="mapcontent"></div>
                </div> 
                <div style="height: 4160px; width: 4800px;"> 
                    <img src="/results/population_zoom.png" alt="" />
                    <div class="mapcontent"></div>
                </div>
            </div>  
            <div id="legend">
                <div id="legend-left">
                    <p class="legend-label">Zone Probability</p>
                    <div class="legend-values">
                        <span>100%</span>
                        <span>>1%</span>
                    </div>
                </div>
                <div id="legend-right">
                    <p class="legend-label">Unit Outcome</p>
                    <div class="legend-values">
                        <ul>
                            <li>Infected</li>
                            <li>Vaccinated</li>
                            <li>Destroyed</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        </div> 

        <script type="text/javascript"> 
            $(document).ready(function() { 
                $("#viewport").mapbox({mousewheel: true}); 
            }); 
        </script> 
    {% else %}  {# map placeholder #}
        <div class="placeholder" id="monitor">
            <p>Running Simulation...</p><img src="{{ STATIC_URL }}working.gif" alt="working"/>
        </div>
    {% endif %}
    
    
    <p>Simulation Version: {{ version_number }}</p>

    {% if not is_simulation_stopped %}
        <a href="/results/">Recalculate Summary Statistics</a>
    {% endif %}
    
    <div id="summaryData">
    {% include "Results/Summary.html" %}
    </div>

    {% if supplemental_files %}
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">Supplemental Output Files</h3>
            </div>
            <div class="panel-body">
                <ul id="file_list">
                    {% for file in supplemental_files %}
                        <li>{{ file }}
                            <a href="#" class="delete-button" data-delete-link="{{ file }}"><img src="{{ STATIC_URL }}icons/delete.png" alt="Delete" class="icon pull-right"></a>
                            <a href="/app/Download/?target={{ file }}" ><img alt="Download" src="{{ STATIC_URL }}icons/download.png" class="icon pull-right"></a>
                            </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    {% endif %}
    <div class="spacer"></div>
    
{% endblock %}